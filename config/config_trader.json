{
  "trader_name": "HMM-Neural Hybrid Trader",
  "description": "HMM 시장 체제 분류 + 신경망 예측 기반 하이브리드 트레이더",
  "version": "1.0.0",

  "data": {
    "symbols": ["SPY", "SQQQ", "AAPL", "MSFT", "NVDA", "GOOGL", "AMZN", "TSLA", "META", "JPM", "UNH", "CONL"],
    "interval": "1d",
    "lookback_days": 520,
    "end_date": "2025-08-07",
    "train_ratio": 0.7,
    "min_data_points": 50
  },

  "data_sources": {
    "macro": {
      "symbols": [
        "^VIX", "^TNX", "^IRX", "UUP", "GLD", "TLT", "QQQ", "IWM", "TIP", "XRT", "GOEX",
        "XLK", "XLF", "XLE", "XLV", "XLI", "XLP", "XLU", "XLB", "XLRE"
      ],
      "output_dir": "data/macro"
    },
    "stocks": {
      "output_dir": "data/trader"
    }
  },

  "hmm_regime": {
    "n_states": 4,
    "state_names": ["TRENDING_UP", "TRENDING_DOWN", "SIDEWAYS", "VOLATILE"],
    "covariance_type": "diag",
    "n_iter": 500,
    "tol": 1e-2,
    "random_state": 42,
    "min_training_days": 252,
    "feature_config": {
      "use_vix": true,
      "use_yield_spread": true,
      "use_dollar_strength": true,
      "use_market_momentum": true,
      "use_volatility_regime": true,
      "rolling_periods": {
        "vix_ma": 20,
        "yield_ma": 10,
        "momentum": 20,
        "volatility_std": 20,
        "vix_percentile": 252,
        "vix_percentile_min": 60
      },
      "thresholds": {
        "vix_volatile": 28,
        "vol_regime_threshold": 0.6,
        "uncertainty_factor_short": 0.8,
        "uncertainty_factor_long": 0.6,
        "confidence_min": 0.3,
        "confidence_max": 0.9,
        "confidence_adjustment": 0.1,
        "min_validation_data": 100
      }
    },
    "model_path": "models/trader/hmm_regime_model.pkl"
  },

  "ml_regime": {
    "n_estimators": 100,
    "max_depth": 10, 
    "min_samples_split": 20,
    "min_samples_leaf": 10,
    "random_state": 42,
    "adaptive": {
      "enable": true,
      "window_days": 252,
      "recalibration_days": 22,
      "volatility_memory_days": 66
    },
    "min_duration_days": 66,
    "model_path": "models/trader/ml_regime_model.pkl"
  },

  "ensemble_regime": {
    "voting_strategy": "weighted",
    "enable_dynamic_weights": true,
    "rf_weight": 0.5,
    "gbm_weight": 0.5,
    "model_path": "models/trader/rf_xgb_ensemble_model.pkl"
  },

  "neural_network": {
    "architecture": {
      "hidden_layers": [32, 16],
      "activation": "relu",
      "dropout_rate": 0.2,
      "output_activation": "tanh"
    },
    "target_forward_days": 22,
    "include_sigma": true,
    "ensemble": {
      "universal_weight": 0.7,
      "individual_weight": 0.3,
      "enable_individual_models": true,
      "enable_weight_learning": true,
      "weight_learning_config": {
        "learning_rate": 0.0005,
        "epochs": 200,
        "batch_size": 16,
        "validation_split": 0.2,
        "min_samples_for_weight_learning": 50,
        "early_stopping_patience": 25,
        "min_delta": 1e-6
      }
    },
    "training": {
      "epochs": 200,
      "batch_size": 16,
      "learning_rate": 0.0005,
      "validation_split": 0.2,
      "early_stopping_patience": 20,
      "reduce_lr_patience": 10
    },
    "features": {
      "lookback_days": 20,
      "use_swing_strategies": true,
      "use_macro_features": true,
      "use_regime_features": true,
      "use_technical_indicators": true
    },
    "regularization": {
      "l2_lambda": 0.001,
      "clip_target": true,
      "target_range": [-1, 1]
    },
    "model_path": "models/trader/neural_predictor_meta.pkl"
  },
  
  "scoring": {
    "regime_multipliers": {
      "TRENDING_UP": 1.2,
      "TRENDING_DOWN": 0.3,
      "SIDEWAYS": 0.8,
      "VOLATILE": 0.6
    },
    "factor_weights": {
      "neural": 0.4,
      "momentum": 0.25,
      "technical": 0.25,
      "liquidity": 0.1
    },
    "volatility_penalty": 0.3,
    "auto_scaling": {
      "enable": true,
      "target_range": 1.6,
      "min_score_spread": 0.1
    }
  },

  "signal_generation": {
    "thresholds": {
      "strong_buy": 0.6,
      "buy": 0.3,
      "hold_upper": 0.3,
      "hold_lower": -0.3,
      "sell": -0.3,
      "strong_sell": -0.6
    },
    "min_confidence": 0.3,
    "position_management": {
      "max_position_size": 0.15,
      "min_position_size": 0.01,
      "default_position_size": 0.05,
      "risk_scaling": true
    }
  },

  "portfolio": {
    "symbols": ["SPY", "SQQQ", "AAPL", "MSFT", "NVDA", "GOOGL", "AMZN", "TSLA", "META", "JPM", "UNH", "CONL"],
    "max_positions": 6,
    "max_total_exposure": 0.95,
    "cash_reserve": 0.05,
    "min_weight": 0.05,
    "max_weight": 0.4,
    "risk_free_rate": 0.02,
    "optimization_method": "sharpe_maximization",
    "concentration_limits": {
      "max_single_position": 0.15,
      "max_sector_exposure": 0.40,
      "max_correlation_group": 0.30
    },
    "risk_management": {
      "portfolio_var_limit": 0.02,
      "max_daily_loss": 0.03,
      "default_volatility": 0.15,
      "default_sharpe_ratio": 0.8,
      "default_expected_return": 0.12,
      "default_sortino_ratio": 1.0,
      "default_max_drawdown": 0.08
    },
    "optimization": {
      "enable_optimization": true,
      "enable_backtest": true,
      "neural_weight_alpha": 0.7,
      "lookback_days": 252
    }
  },

  "optimization": {
    "enable": false,
    "method": "optuna",
    "objective_metric": "sharpe_ratio",
    "n_trials": 100,
    "threshold_ranges": {
      "strong_buy": [0.4, 0.7],
      "buy": [0.2, 0.5],
      "hold_upper": [0.0, 0.3],
      "hold_lower": [-0.3, 0.0],
      "sell": [-0.5, -0.2],
      "strong_sell": [-0.7, -0.4]
    },
    "volatility_penalty": 0.3
  },

  "neural_config": {
    "architecture": {
      "hidden_layers": [128, 64, 32],
      "dropout_rate": 0.2
    },
    "training": {
      "learning_rate": 0.001,
      "batch_size": 32,
      "epochs": 500,
      "early_stopping_patience": 50,
      "weight_decay": 0.0001
    }
  },

  "logging": {
    "level": "INFO",
    "enable_file": true,
    "enable_console": true,
    "file_rotation": {
      "max_size": "10MB",
      "backup_count": 5
    },
    "format": {
      "console": "colored",
      "file": "json"
    },
    "filters": {
      "exclude_debug_from_production": true,
      "min_level_for_file": "INFO"
    },
    "log_components": {
      "hmm_regime": true,
      "neural_predictions": true,
      "investment_scores": true,
      "trading_signals": true,
      "portfolio_updates": true,
      "performance_metrics": true,
      "data_collection": true,
      "model_training": true,
      "backtesting": true
    }
  },

  "output": {
    "results_folder": "results/trader",
    "logs_folder": "log",
    "reports": {
      "daily_summary": true,
      "performance_analysis": true,
      "portfolio_optimization": true,
      "backtest_report": true
    },
    "export_formats": ["csv", "json"]
  }
}