{
  "trader_name": "HMM-Neural Hybrid Trader",
  "description": "HMM 시장 체제 분류 + 신경망 예측 기반 하이브리드 트레이더",
  "version": "1.0.0",

  "data": {
    "symbols": ["AAPL", "META", "QQQ", "SPY"],
    "interval": "1d",
    "lookback_days": 700,
    "end_date": "2025-07-24",
    "train_ratio": 0.6,
    "min_data_points": 50
  },

  "data_sources": {
    "macro": {
      "symbols": [
        "^VIX", "^TNX", "^IRX", "UUP", "GLD", "TLT", "QQQ", "IWM", "TIP", "XRT", "GOEX",
        "XLK", "XLF", "XLE", "XLV", "XLI", "XLP", "XLU", "XLB", "XLRE"
      ],
      "output_dir": "data/macro"
    },
    "stocks": {
      "output_dir": "data/trader"
    }
  },

  "hmm_regime": {
    "n_states": 4,
    "state_names": ["BULLISH", "BEARISH", "SIDEWAYS", "VOLATILE"],
    "covariance_type": "diag",
    "n_iter": 1000,
    "random_state": 42,
    "min_training_days": 252,
    "feature_config": {
      "use_vix": true,
      "use_yield_spread": true,
      "use_dollar_strength": true,
      "use_market_momentum": true,
      "use_volatility_regime": true,
      "rolling_periods": {
        "vix_ma": 20,
        "yield_ma": 10,
        "momentum": 20,
        "volatility_std": 20
      }
    },
    "model_path": "models/trader/hmm_regime_model.pkl"
  },

  "neural_network": {
    "architecture": {
      "hidden_layers": [32, 16],
      "activation": "relu",
      "dropout_rate": 0.2,
      "output_activation": "tanh"
    },
    "target_forward_days": [22, 66],
    "train_ratio": 0.8,
    "ensemble": {
      "universal_weight": 0.7,
      "individual_weight": 0.3,
      "enable_individual_models": true,
      "enable_weight_learning": true,
      "weight_learning_config": {
        "learning_rate": 0.001,
        "epochs": 100,
        "batch_size": 32,
        "validation_split": 0.2,
        "min_samples_for_weight_learning": 50
      }
    },
    "training": {
      "epochs": 200,
      "batch_size": 32,
      "learning_rate": 0.001,
      "validation_split": 0.2,
      "early_stopping_patience": 20,
      "reduce_lr_patience": 10
    },
    "features": {
      "lookback_days": 20,
      "use_swing_strategies": true,
      "use_macro_features": true,
      "use_regime_features": true,
      "use_technical_indicators": true
    },
    "regularization": {
      "l2_lambda": 0.001,
      "clip_target": true,
      "target_range": [-1, 1]
    },
    "model_path": "models/trader/neural_predictor_meta.pkl"
  },
  
  "scoring": {
    "regime_multipliers": {
      "BULLISH": 1.2,
      "BEARISH": 0.3,
      "SIDEWAYS": 0.8,
      "VOLATILE": 0.6
    },
    "factor_weights": {
      "neural": 0.4,
      "momentum": 0.25,
      "technical": 0.25,
      "liquidity": 0.1
    },
    "volatility_penalty": 0.3
  },

  "signal_generation": {
    "thresholds": {
      "strong_buy": 0.6,
      "buy": 0.3,
      "hold_upper": 0.3,
      "hold_lower": -0.3,
      "sell": -0.3,
      "strong_sell": -0.6
    },
    "min_confidence": 0.3,
    "position_management": {
      "max_position_size": 0.15,
      "min_position_size": 0.01,
      "default_position_size": 0.05,
      "risk_scaling": true
    }
  },

  "portfolio": {
    "symbols": ["AAPL", "META", "QQQ", "SPY"],
    "max_positions": 4,
    "max_total_exposure": 0.95,
    "cash_reserve": 0.05,
    "concentration_limits": {
      "max_single_position": 0.15,
      "max_sector_exposure": 0.40,
      "max_correlation_group": 0.30
    },
    "risk_management": {
      "portfolio_var_limit": 0.02,
      "max_daily_loss": 0.03
    },
    "optimization": {
      "enable_optimization": true,
      "enable_backtest": true,
      "optimization_method": "sharpe_maximization",
      "min_weight": 0.05,
      "max_weight": 0.4,
      "risk_free_rate": 0.02,
      "neural_weight_alpha": 0.7,
      "lookback_days": 252
    }
  },

  "optimization": {
    "enable": false,
    "method": "optuna",
    "objective_metric": "sharpe_ratio",
    "n_trials": 100,
    "train_ratio": 0.7,
    "threshold_ranges": {
      "strong_buy": [0.4, 0.7],
      "buy": [0.2, 0.5],
      "hold_upper": [0.0, 0.3],
      "hold_lower": [-0.3, 0.0],
      "sell": [-0.5, -0.2],
      "strong_sell": [-0.7, -0.4]
    },
    "volatility_penalty": 0.3
  },

  "backtesting": {
    "enable": true,
    "period_ratio": 0.5,
    "min_period_days": 60,
    "max_period_days": 252,
    "start_date_offset": 0,
    "end_date_offset": 0,
    "performance_metrics": {
      "calculate_sharpe": true,
      "calculate_sortino": true,
      "calculate_max_drawdown": true,
      "calculate_win_rate": true,
      "benchmark_comparison": true
    },
    "trading_simulation": {
      "include_commission": true,
      "include_slippage": true,
      "position_sizing": "fixed",
      "max_positions": 4
    }
  },

  "trading": {
    "initial_capital": 100000,
    "commission": 0.001,
    "slippage": 0.0005,
    "position_sizing": "fixed",
    "fixed_position_size": 0.1,
    "execution": {
      "order_type": "market",
      "time_in_force": "day"
    }
  },

  "risk_management": {
    "position_sizing": {
      "method": "volatility_adjusted",
      "base_risk": 0.02,
      "max_risk_per_trade": 0.05,
      "portfolio_heat": 0.20
    },
    "stop_loss": {
      "method": "adaptive",
      "min_stop": 0.03,
      "max_stop": 0.12,
      "trailing_stop": true,
      "volatility_multiplier": 2.0
    },
    "exposure_limits": {
      "max_gross_exposure": 1.0,
      "max_net_exposure": 0.8,
      "max_sector_exposure": 0.4,
      "max_single_name": 0.15
    }
  },

  "logging": {
    "level": "INFO",
    "enable_file": true,
    "enable_console": true,
    "file_rotation": {
      "max_size": "10MB",
      "backup_count": 5
    },
    "format": {
      "console": "colored",
      "file": "json"
    },
    "filters": {
      "exclude_debug_from_production": true,
      "min_level_for_file": "INFO"
    },
    "log_components": {
      "hmm_regime": true,
      "neural_predictions": true,
      "investment_scores": true,
      "trading_signals": true,
      "portfolio_updates": true,
      "performance_metrics": true,
      "data_collection": true,
      "model_training": true,
      "backtesting": true
    }
  },

  "output": {
    "results_folder": "results/trader",
    "logs_folder": "log",
    "reports": {
      "daily_summary": true,
      "performance_analysis": true,
      "portfolio_optimization": true,
      "backtest_report": true
    },
    "export_formats": ["csv", "json"]
  },

  "model_persistence": {
    "save_models": true,
    "model_directory": "models/trader",
    "model_versioning": true,
    "backup_models": true,
    "retention_days": 30
  }
}
